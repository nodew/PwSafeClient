<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="PwSafeClient.Maui.Pages.UnlockPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Unlock"
    Shell.NavBarIsVisible="False"
    BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource OffBlack}}">

    <Grid Padding="24">
        <ScrollView>
            <VerticalStackLayout Spacing="14" VerticalOptions="Center" Padding="0,18,0,0">
                <VerticalStackLayout Spacing="10" HorizontalOptions="Center">
                    <Border
                        HeightRequest="64"
                        WidthRequest="64"
                        Background="{StaticResource Primary}">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="16" />
                        </Border.StrokeShape>
                        <Label
                            Text="ðŸ”’"
                            FontSize="30"
                            HorizontalOptions="Center"
                            VerticalOptions="Center"
                            HorizontalTextAlignment="Center"
                            VerticalTextAlignment="Center" />
                    </Border>

                    <Label Text="Welcome Back" FontSize="24" HorizontalOptions="Center" />

                    <Border
                        Padding="10,6"
                        Background="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray900}}"
                        StrokeThickness="0">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="999" />
                        </Border.StrokeShape>
                        <Label
                            Text="{Binding DisplayName}"
                            FontSize="12"
                            TextColor="{AppThemeBinding Light={StaticResource Gray900}, Dark={StaticResource Gray200}}"
                            HorizontalOptions="Center" />
                    </Border>

                    <Label
                        Text="Enter your master password to decrypt and access your safe."
                        FontSize="12"
                        TextColor="{AppThemeBinding Light={StaticResource Gray500}, Dark={StaticResource Gray300}}"
                        HorizontalTextAlignment="Center"
                        HorizontalOptions="Center" />
                </VerticalStackLayout>

                <Border
                    Padding="12"
                    Background="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Gray900}}"
                    Stroke="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray600}}">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="14" />
                    </Border.StrokeShape>

                    <Entry
                        Placeholder="Master password"
                        IsPassword="True"
                        Text="{Binding Password}"
                        BackgroundColor="Transparent" />
                </Border>

                <Label
                    Text="{Binding ErrorMessage}"
                    IsVisible="{Binding ErrorMessage, Converter={StaticResource StringNotNullOrWhiteSpaceConverter}}"
                    TextColor="Red"
                    FontSize="12" />

                <Button
                    Text="Unlock Safe"
                    Command="{Binding UnlockCommand}"
                    BackgroundColor="{StaticResource Primary}"
                    CornerRadius="12"
                    HeightRequest="48" />

                <Button
                    Text="{Binding BiometricButtonText}"
                    Command="{Binding BiometricUnlockCommand}"
                    IsVisible="{Binding IsBiometricUnlockVisible}"
                    BackgroundColor="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray900}}"
                    TextColor="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}"
                    CornerRadius="12"
                    HeightRequest="48" />

                <Button
                    Text="Switch database"
                    Command="{Binding SwitchDatabaseCommand}"
                    BackgroundColor="Transparent"
                    TextColor="{AppThemeBinding Light={StaticResource Gray500}, Dark={StaticResource Gray300}}"
                    FontSize="12"
                    Padding="0"
                    HeightRequest="32"
                    HorizontalOptions="Center" />
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
